#!/bin/bash

echo "======================================================"
echo "          NON-SUDO SYSTEM / NETWORK AUDIT REPORT      "
echo "======================================================"
echo "Generated on: $(date)"
echo ""

echo "==================== SERVER INFO ====================="

echo "Server Brand & Model:"
cat /sys/class/dmi/id/sys_vendor 2>/dev/null
cat /sys/class/dmi/id/product_name 2>/dev/null
echo ""

echo "Serial Number / Asset Tag:"
cat /sys/class/dmi/id/product_serial 2>/dev/null
echo ""

echo "CPU Information:"
lscpu | grep -E 'Model name|CPU\(s\)|Thread|Core'
echo ""

echo "Clock Speed (MHz):"
lscpu | grep "CPU MHz"
echo ""

echo "Installed RAM:"
free -h
echo ""

echo "Maximum Supported RAM: (Requires sudo - Not Available)"
echo ""

echo "Storage Devices (HDD/SSD):"
lsblk -o NAME,ROTA,TYPE,SIZE,MODEL
echo ""

echo "Total and Free Disk Space:"
df -h
echo ""

echo "RAID Configuration:"
echo "Software RAID (mdadm) – Requires sudo"
cat /proc/mdstat 2>/dev/null
echo ""

echo "Operating System:"
lsb_release -a 2>/dev/null
uname -a
echo ""

echo "Network Interfaces:"
ip link show
echo ""

echo "NIC Hardware Info:"
lshw -class network 2>/dev/null | grep -E "logical name|product|vendor|capacity|speed"
echo ""

echo "Uptime / Operational Status:"
uptime -p
echo ""

echo "Temperature Sensors:"
echo "sensors command needs sudo/lm-sensors — Not Available"
echo ""

echo "================ NETWORK INFORMATION ================="

echo "IP Addresses:"
ip addr show
echo ""

echo "Routing Table:"
ip route
echo ""

echo "Public IP Address:"
curl -s ifconfig.me
echo ""
echo ""

echo "Active Network Ports:"
ss -tulpn
echo ""

echo "================= ROUTER / INTERNET ==================="

echo "Gateway (Router) IP:"
ip route | grep default | awk '{print $3}'
echo ""

GATEWAY=$(ip route | grep default | awk '{print $3}')

echo "Ping Test to Gateway:"
ping -c 4 $GATEWAY
echo ""

echo "Internet Connectivity Test:"
ping -c 4 8.8.8.8
echo ""

echo "================== POWER & ENVIRONMENT ================"
echo "UPS Status requires sudo (NUT). Not Available."
echo ""

echo "======================================================"
echo "                END OF AUDIT REPORT                   "
echo "======================================================"
